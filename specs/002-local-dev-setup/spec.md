# Feature Specification: Local Dev Setup

**Feature Branch**: `002-local-dev-setup`  
**Created**: 2025-12-31  
**Status**: Draft  
**Input**: User description: "ローカルの開発基盤を整えて。メインUI、デモサーバーが使える状態にして https://hono.dev/docs/getting-started/cloudflare-workers を読んで実装すること。実際にコマンドを叩いてファイルを生成すること。絶対にファイルを勝手に作成したり、バージョンを指定しないこと。"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - Run Main UI Locally (Priority: P1)

As a developer, I want to start the main UI locally so I can iterate on the
primary user experience without remote dependencies.

**Why this priority**: The main UI is the entry point for product development
and must be available first.

**Independent Test**: A developer can run a documented command and access the
main UI locally with a working landing view.

**Acceptance Scenarios**:

1. **Given** a clean working tree, **When** I run the documented setup command
   for the main UI, **Then** the local UI loads in a browser.
2. **Given** the main UI is running locally, **When** I refresh after a code
   change, **Then** the updated UI is visible without additional setup.

---

### User Story 2 - Run Demo Server Locally (Priority: P2)

As a developer, I want to run the demo server locally so I can validate demo
flows and playground behavior.

**Why this priority**: The demo server is needed to confirm API behavior and
onboarding flows during development.

**Independent Test**: A developer can run a documented command and access the
local demo surface with a healthy response.

**Acceptance Scenarios**:

1. **Given** a clean working tree, **When** I run the documented setup command
   for the demo server, **Then** the demo surface loads locally.

---

### User Story 3 - Command-Based Bootstrap (Priority: P3)

As a developer, I want the local development setup to be created via commands
so I can reproduce it without manual file creation.

**Why this priority**: Reproducible setup reduces onboarding time and errors.

**Independent Test**: A developer can run the documented commands and obtain all
required files without manual creation.

**Acceptance Scenarios**:

1. **Given** no local setup files exist, **When** I run the documented bootstrap
   commands, **Then** all required files are generated automatically.

---

### Edge Cases

- What happens when required local dependencies are missing?
- How does the setup handle ports already in use?
- What happens if a bootstrap command fails partway through?

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: System MUST provide a local development setup for the main UI that
  can be started with documented commands.
- **FR-002**: System MUST provide a local development setup for the demo server
  that can be started with documented commands.
- **FR-003**: Setup MUST be reproducible through command execution; manual file
  creation is not allowed.
- **FR-004**: Setup instructions MUST avoid version pinning in bootstrap steps.
- **FR-005**: Setup instructions MUST be explicit about any required local
  configuration inputs or prerequisites.

### Key Entities *(include if feature involves data)*

- **Local Setup**: The collection of commands and generated files enabling local
  development.
- **Service Surface**: The main UI and demo server entry points exposed locally.

## Assumptions

- Developers have the required local runtime prerequisites installed.
- Developers can access local ports needed to run the main UI and demo server.

## Dependencies

- Access to any required service accounts or credentials for local startup.

## Constitution Alignment *(mandatory)*

- **Sheet schema rules**: N/A for local setup; no schema changes.
- **Row-level ACL**: N/A for local setup; no ACL behavior changes.
- **Platform constraints**: Local setup must support the edge runtime and the
  separation of main UI and demo surface.
- **Setup/system sheets**: No changes to system sheets; local setup must not
  alter setup wizard behavior.

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: A new developer can start the main UI locally within 5 minutes
  using only documented commands.
- **SC-002**: A new developer can start the demo server locally within 5 minutes
  using only documented commands.
- **SC-003**: 100% of required local setup files are generated by commands with
  no manual file creation.
- **SC-004**: Setup instructions contain zero version-pinned bootstrap commands.
